{% extends 'base.html' %}

{% block head-title %}
  {{ collection.title }} 
{% endblock %}

{% block breadcrumb %}
  <li class="breadcrumb-item"><a href="{% url 'db:home' %}">Home</a></li>
  <li class="breadcrumb-item"><a href="{% url 'db:collections' %}">Collections</a></li>
  <li class="breadcrumb-item active">{{ collection.title }}</li>
{% endblock %}


{% block content %}


<style>
div.collection-title {
  font-weight: 400;
  font-size: 2rem;
  margin: 0.2rem 0rem;   
}
div.collection-section {
  font-weight: 400;
  font-size: 1.3rem;
  margin: 1rem 0 0.2rem 0;
  padding-bottom: 0.2rem;
  border-bottom: 1px solid #aaa;
}
div.collection-label {
  display: inline-block;
  padding: 0 0.5rem;
}
div.collection-entry {
  display: inline;
}
div.collection-block {
    scroll-margin-top: 100px;
}
a.HREF {
  color: #22a;   
}
a.CITE {
  color: #22a;   
}
</style>

<script>
/*
function scrollTo(event, id) {
  event.preventDefault();
  element = document.getElementById(id);
  element.scrollIntoView({behavior: "smooth", block: "nearest", inline: "nearest"});
}
*/
</script>


{{  collection_html | safe }}


<!--
<hr>Data: {{ collection.data.json }}
-->

<script>
/*
var acites = document.getElementsByClassName("CITE");
for (i = 0; i < acites.length; i++) {
    //break;
    a = acites.item(i);
    a.CITE_TARGET_ID = a.getAttribute('HREF').substring(1);
    a.setAttribute('HREF','#');
    a.addEventListener("click",function(event) {
            //Event.stop(event);
            //event.preventDefault();
            console.log(event);
            aself = event.target;
            id_target = aself.CITE_TARGET_ID;
            console.log(id_target);
            target = document.getElementById(id_target);
            //target.scrollIntoView({behavior: "smooth", block: "nearest", inline: "nearest"});
            window.scrollIntoView(target);
            return false;
        }, false
    );
}
*/
/*
$(document).ready(function() {
          $('a[href^="#"]').click(function() {
              $('html, body').animate({
                  scrollTop: $('[id="' + $.attr(this, 'href').substr(1) + '"]').offset().top
                }, 500, function() {
            window.location.hash = href;
          });
              return false;
            });
        });
*/        
 let $root = $('html, body');
      $('a[href^="#"]').click(function() {
          let href = $.attr(this, 'href');
          var newScrollTop = $(href).offset().top - 100
          $root.animate({
            'scrollTop': newScrollTop,
            //'background-color': '#e5eecc'
          }, 400, function() {
            //$('html').append('<style>'+href+':target {scrollTop: '+newScrollTop+';}</style>');
            window.location.hash = href;
          });
          return false;
        });
</script>

{% endblock %}

